{% extends 'posts/base.html' %}

{% block body %}
{% if request.user.is_superuser %}
Only Admins can see this
{% endif %}

<div class="container">
    <div class="col-md-9">
        <div class="row gy-2">

            {% for post in posts %}
            <div class="col-md-4">
                <div class="card">
                    <a class="nav-link active" aria-current="page"
                        href="{% url 'accounts:other_profile_show' user_id=post.name_id %}">
                        <p class='username'>{{post.name}}</p>
                    </a>


                    {% if post.image  %}
                    <img src="{{post.image.url}}" class="index-image" />
                    {% endif %}

                    <div class="card-body">

                        <a href="{% url 'posts:post_show' post.id %}" class="text-decoration-none">
                            <p class="text-capitalize">
                                {{post.workout}}

                            </p>
                        </a>
                        <p class="date-text"> {{post.created_at|date:'d M Y' }}</p>
                        <div class="text-center">
                            <a class="btn btn-primary btn-sm" href=#>Comment</a>

                            <a class="card-link btn btn-primary btn-sm" href=#>&#9829;</a>
                        </div>

                    </div>
                </div>
            </div>
            {% empty %}

            <div class="alert alert-warning">
                No Posts Yet
            </div>
            {% endfor %}

        </div>
    </div>


    {% endblock body %}
    {% block scripts %}
    <div style="display:inline-block">
        <label>liked</label>
        <label class="switch">
            <input type="checkbox" id="checkbox" value="{{like.liked}}">
            <span class="slider round"></span>
        </label>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script> <!-- Import Jquery Here-->
    <script type="text/javascript">
        $(document).ready(function () {
            $('#checkbox').change(function () {
                $.post("/", {
                    id: '{{post.id}}',
                    liked: this.checked,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
            });
        });
    </script>
    {% endblock scripts %}